# PLAYER ENGINE CODEX v3.0  
## SECTION 02 — ACTION PRIVILEGES & MOVEMENT MODEL  
*What an Operative may do, and how they cross the Realm.*

---

## 2.0 Purpose

This section defines:

- which actions an Operative is allowed to perform  
- how those actions are gated (states, resources, corruption)  
- how movement behaves and feels  
- how Player Engine decisions become Combat Engine actions  

It is the bridge between **input**, **player state**, and the **Action Framework**.

---

## 2.1 Action Privilege Types

Each Operative has a set of **Action Privileges** that determine what they can do at any given time:

- **MOVE** — walk, run, dash  
- **ATTACK** — basic attacks  
- **ABILITY** — cast abilities / skills  
- **CARD_PLAY** — play cards from the deck/hand  
- **GUARD** — block, parry, special defensive actions  
- **INTERACT** — use objects, triggers, switches  
- **TRANSFORM** — enter Overdrive, Shadow Overdrive, other special states  

Each privilege can be:

- **enabled**  
- **disabled**  
- **temporarily locked** (stun, freeze, fear, etc.)  
- **context-limited** (only in combat, only in safe zones, etc.)

---

## 2.2 Action Privilege Model

Operative privileges are stored as:

```jsonc
ActionPrivileges {
  can_move: bool,
  can_attack: bool,
  can_use_abilities: bool,
  can_play_cards: bool,
  can_guard: bool,
  can_interact: bool,
  can_transform: bool,
  state_lock_flags: [string]   // e.g. "STUNNED", "SILENCED"
}
Whenever input is received, the Player Engine:

Checks the relevant privilege(s)

Checks state lock flags

Either generates an action or returns a failure reason

2.3 Movement Model Overview
Movement is controlled by:

AGI (Agility)

statuses (slow, haste, stun)

environment (zones, hazards)

corruption (distortion, jitter, drift)

Core movement concepts:

Base Move Speed — derived from AGI

Dash / Burst — short, high-intensity displacement

Acceleration / Deceleration — how fast movement responds

Facing Direction — where the Operative aims actions

2.4 Movement Data
Movement state is tracked as:

jsonc
Copy code
MovementState {
  position: Vector,
  velocity: Vector,
  facing_direction: Vector,
  base_speed: float,
  dash_cooldown: float,
  is_dashing: bool,
  dash_time_remaining: float
}
Base speed example:

text
Copy code
base_speed = movement_base + (AGI * movement_per_agi)
Statuses (slow, haste) and corruption modify velocity and base_speed during updates.

2.5 Dash / Burst Actions
Dash is a privileged movement action.

Rules:

requires can_move == true

cannot be used while stunned/frozen

uses dash cooldown

may grant brief i-frames (invulnerability frames)

direction is typically input-based or facing-based

Dash generates a movement-type Action for the Combat Engine (important for logs and triggers).

2.6 Input → Action Conversion
The Player Engine listens to input each frame/beat and decides:

text
Copy code
Input → (check privileges + states) → generate Action or ignore
Examples:

Attack button → if can_attack, generate basic_attack action

Ability button → if can_use_abilities, generate ability_cast action

Guard button → if can_guard, generate guard action

Dash input → if can_move and no stun, update MovementState + optional Action

The Combat Engine never reads physical inputs — only Actions generated by the Player Engine.

2.7 States That Lock Actions
Certain states override privileges:

STUNNED

cannot move, attack, use abilities, guard, transform

SILENCED

cannot use abilities or cast spells

ROOTED

can attack/guard, but cannot move/dash

FEARED

movement partially or fully overridden, restricted action set

SHADOW_OVERDRIVE

may alter which actions are available

These are usually triggered by statuses (see Status System).

2.8 Rhythm & Movement
Rhythm interacts with movement in subtle ways:

PERFECT timing on dashes may grant:

extended dash distance

extra i-frames

resource gain

LATE movement inputs may feel slightly heavier

Rhythm Desync statuses can introduce drift or unresponsiveness

Movement must still remain readable and fair — rhythm can enhance or penalize, but not completely break control.

2.9 Corruption & Movement
Corruption can:

jitter the Operative’s path

curve movement slightly

invert left/right under severe corruption (rare / high difficulty)

create brief “slip” events

These effects must be visually and audibly signalled to avoid unfairness.

2.10 Integrity Rules
Input must always produce deterministic Action decisions.

Action Privileges must be the only gateway to player actions.

Movement must never become uncontrollable without clear feedback.

Stun / root / fear must always clearly communicate locked privileges.

Rhythm bonuses must never cause clipping or out-of-bounds movement.

Corruption movement effects must remain bounded and explainable.

Dash must respect collision with the environment.

Targeting and movement must be synchronized to avoid desync.

Action Privileges must always update when states or statuses change.

In replays, the same inputs + states must yield the same actions.